define(function(require) {
    "use strict";

    var userViewTemplate = require('Text!../views/usermanager.html'), userModelView = require('../model/userviewmodel'), userRepo = require('repository/userrepository'), viewResolver = require("ViewResolver"), PagedGridView = require("modules/common/model/pagedgridmodel");

    var userController = {

	userPagedGridView : ko.observable(''),

	init : function() {
	    console.log("init USER-CONTROLLER!!");
	    userRepo.getAllUserList().then(function(usrData) {
		var mappedUserList = $.map(usrData, function(item) {
		    var usr = new userModelView(item);
		    return usr;
		});
		userController.userPagedGridView(new PagedGridView(mappedUserList, [ "1", "5", "10", "15" ], "5"));
	    });

	    viewResolver.renderModelView("people", this, userViewTemplate, "gridStyle");

	}
    };

    return userController;

});